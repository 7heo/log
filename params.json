{"name":"7heo's log","tagline":"Another random web log","body":"PHP Function to interpret UTF-8 into Unicode\r\n============================================\r\n*2014/03/04 - 2100 GMT+1*\r\n\r\nLately, I have had to encode UTF-8 characters into html-entities. But There is no function for that in PHP. So I have written one:\r\n\r\n```PHP\r\nfunction utf8_to_unicode($UTF8_char) {\r\n    global $UTF8_ERR;\r\n    $isByte1 = true;\r\n    $Bytes = unpack(\"C*\", $UTF8_char);\r\n    $len = count($Bytes);\r\n    $UnicodeValue = 0;\r\n    foreach($Bytes as $Byte)\r\n    {   \r\n        $UnicodeValue *= 0x40;\r\n        if($isByte1)\r\n        {       \r\n            $isByte1 = false;\r\n            if($Byte != 0xC0 && $Byte != 0xC1 && $Byte < 0xF5 && ((($Byte & 0x80) == 0 && $len === 1) || (($Byte & 0xE0) == 0xC0 && $len === 2) || (($Byte & 0xF0) == 0xE0 && $len === 3) || (($Byte & 0xF8) == 0xF0 && $len === 4)))\r\n            {           \r\n                if(($Byte & 0x80) == 0)\r\n                    $UnicodeValue += ($Byte & 0x7F);\r\n                if(($Byte & 0xE0) == 0xC0)\r\n                    $UnicodeValue += ($Byte & 0x1F);\r\n                if(($Byte & 0xF0) == 0xE0)\r\n                    $UnicodeValue += ($Byte & 0x0F);\r\n                if(($Byte & 0xF8) == 0xF0)\r\n                    $UnicodeValue += ($Byte & 0x07);\r\n            }           \r\n            else        \r\n            {           \r\n                $UTF8_ERR = \"Invalid first byte\";\r\n                return false;   \r\n            }           \r\n        }       \r\n        else    \r\n        {       \r\n            if(($Byte & 0xC0) == 0x80)\r\n                $UnicodeValue += ($Byte & 0x3F); \r\n            else        \r\n            {           \r\n                $UTF8_ERR = \"Invalid continuation byte\";\r\n                return false;   \r\n            }           \r\n        }       \r\n    }   \r\n\r\n    if($UnicodeValue < 0x80)\r\n    {   \r\n        if($len != 1)\r\n        {       \r\n            $UTF8_ERR = \"Overlong encoding. The character should be 1 byte instead of $len.\";\r\n            return false;\r\n        }       \r\n    }   \r\n    elseif($UnicodeValue < 0x800)\r\n    {   \r\n        if($len != 2)\r\n        {       \r\n            $UTF8_ERR = \"Overlong encoding. The character should be 2 byte instead of $len.\";\r\n            return false;\r\n        }       \r\n    }   \r\n    elseif($UnicodeValue < 0x10000)\r\n    {   \r\n        if($len != 3)\r\n        {       \r\n            $UTF8_ERR = \"Overlong encoding. The character should be 3 byte instead of $len.\";\r\n            return false;\r\n        }       \r\n    }   \r\n    elseif($UnicodeValue < 0x110000)\r\n    {   \r\n        if($len != 4)\r\n        {       \r\n            $UTF8_ERR = \"Overlong encoding. The character should be 4 byte instead of $len.\";\r\n            return false;\r\n        }       \r\n    }\r\n    else\r\n    {\r\n        $UTF8_ERR = \"Unicode overflow\";\r\n        return False;\r\n    }\r\n    return $UnicodeValue;\r\n}\r\n```\r\n\r\n----\r\n\r\nHow to get the complete list of all the packages you did install with APT\r\n=========================================================================\r\n*2014/01/10 - 1500 GMT+1*\r\n\r\n    zgrep Commandline..apt-get.install /var/log/apt/history.log* \\\r\n    | sed 's/^.*install \\(.*\\)$/\\1/g' | tac\r\n\r\n----\r\n\r\nYou should comment... to tell how bad you are at writing code.\r\n==============================================================\r\n*2013/12/23 - 1900 GMT+1*\r\n\r\nThese days, I write a lot of C# code, in order to get my prototypes in working states; so I can then focus onto their improvement, and finally write them in C. And while I was writing the code for the automatic generation of a Form's controls with the correct size, I did find the best example to show how and why comments are bad.\r\n\r\nFrom the university teachers I've known, and pretty much every single person who tried to teach me how to write code, I know this: \"One should **always** comment his/her code, because it is very hard to re-read, and especially re-understand what you have written, several days/weeks/months/years after.\".\r\nWhile this is very true for spaghetti code and other various forms of coding horror (hence the teacher-to-student recommendation), it can be considered to be noise if the code is well written.\r\n\r\nThe problem, then, is what people consider to be good code. Well, I think that one can define good code as: code that can be understood several years after without the need of commenting it.\r\n\r\nAnd, to illustrate what I mean, I'll provide an example of a bad code, with comments, and then, of the good version of the same code:\r\n\r\n```C#\r\nTabControl myTabControl = new TabControl();\r\nmyTabControl.Top = 5 + menuStrip1.Height;\r\nmyTabControl.Left = 5;\r\nmyTabControl.Width = ClientSize.Width - 8;\r\n// ClientSize or ClientRectangle report widths two pixel inferior to\r\n// the actual size.\r\nmyTabControl.Height = ClientSize.Height - 9 - menuStrip1.Height -\r\n                      statusStrip1.Height;\r\n// ClientSize or ClientRectangle report heights one pixel inferior to\r\n// the actual size.\r\n```\r\n```C#\r\nint margin = 5;\r\nTabControl mainTabControl = new TabControl();\r\nthis.mainTabControl.Left = this.margin;\r\nthis.mainTabControl.Top = this.margin + this.menuStrip1.Height;\r\nthis.mainTabControl.Width = this.ClientSize.Width + 2 -\r\n                            (this.margin + this.mainTabControl.Left);\r\nthis.mainTabControl.Height = this.ClientSize.Height + 1 -\r\n                             (this.margin +\r\n                              this.mainTabControl.Top +\r\n                              this.statusStrip1.Height);\r\n```\r\n\r\nIn the second example, you directly understand that 2 is added to the ClientSize width, and 1 is added to its height, that then the margin and left position are subtracted to width; and top to height respectively, and that for the height, you also subtract the height of the status strip.\r\n\r\nThis is due to the style of the code, the order of each instruction (please note that the complexity of the right member of each affectation increases with each line, giving you something new to understand on each line), the use of variables when necessary, the re-use of semantically-fitting terms (why use `this.margin` when you can refer to `this.mainTabControl.Left` instead?), and, of course, the (logical) order of the addition/subtraction terms assorted with the use of parenthesis (so 2 and 1 are respectively related to the width and the height, and that's obvious).\r\n\r\n----\r\n\r\nMicrosoft is catching up\r\n========================\r\n*2013/12/08 - 0120 GMT+1*\r\n\r\nFor people who know me, it's kind of obvious that I don't like Google and Apple, mainly because their attitude and disregard towards privacy and user rights. And for the same reasons, I was \"tolerating\" Microsoft, since they, as I thought, \"failed to get enough competent manpower to be enough of a threat\". Well, it turns out I was wrong. Or, if I was right, it was only temporary.\r\n\r\nAs most gamers are well aware now, the Xbox One, the new Microsoft console, released right for this Christmas, was [to require a \"permanent internet connection\", until the pressure from both the industry and the consumers made them drop this insane idea](https://en.wikipedia.org/wiki/Xbox_One#Controversy).\r\n\r\nOn the same thread, [the German government did warn people to not use Windows 8, given the privacy issues it might engender](http://www.theregister.co.uk/2013/08/23/nsa_germany_windows_8/).\r\n\r\nSo, I was aware that Microsoft did follow Apple and Google in their quest for the virtual world domination, but what I didn't realize, however, was how far they already were on the path: while trying the brand new Visual Studio Express 2013 for Desktop today, I routinely checked the \"Help\" menu. And I noticed an entry called \"[Online Privacy Statment](http://msdn.microsoft.com/en-us/vstudio/dn425032.aspx)\". It states (among other things) as follow:\r\n\r\n> Microsoft may access or disclose information about you, including the content of your communications, in order to: (a) comply with the law or respond to lawful requests or legal process; (b) protect the rights or property of Microsoft or our customers, including the enforcement of our agreements or policies governing your use of the services; or (c) act on a good faith belief that such access or disclosure is necessary to protect the personal safety of Microsoft employees, customers, or the public. We may also disclose personal information as part of a corporate transaction such as a merger or sale of assets.\r\n\r\nAs every techie is aware, it's nowadays literally impossible to use any popular service on the Internet (github included) without having to comply to store data (including, especially, personal information) on third party servers; the first statement (the (a) one) is totally normal and part of the legal mumble. Now, please notice the second and the third ones (respectively (b) and (c)): *this is granting them full reading rights over the contents of your computer and your communications; assorted with a legal blank check to do whatever they want with it*.\r\n\r\nSo, it seems that all the big corporations out there are cutting off our rights one after the other, at a speed that is increasing with time... The only problem I see in that is that the FOSS world is neither ready nor mature enough yet. So if your read that, and are to be involved in any FOSS community... Please think about anything you can do. And I **do** mean think: please don't contribute mindlessly to the already overly bloated messy junkpile that most of the FOSS is at the moment.\r\n\r\n----\r\n\r\nC# Properties\r\n=============\r\n*2013/11/18 - 0315 GMT+1*\r\n\r\nSo, I've done some C# recently. And, since I'm not really used to the language, I read the [MSDN documentation](http://msdn.microsoft.com/en-us/library/) a lot, and also [stackoverflow](http://stackoverflow.com/), when I don't find the info there.\r\n\r\nBut rarely, I don't find the info on either of these websites. It might be because I don't ask the right question, or because it's about a trivial problem that most .NET developers overcome in seconds.\r\n\r\nHere is one problem I had some hard time to overcome (followed, of course, by the solution):\r\n\r\n**Given objects you can access via the \"Square bracket\" operators (i.e. '[<expr>]') on another object, how to list all the (children) objects you can access?**\r\n\r\nFirst of all, I've tried to make my code throw an exception, so I could check the existing variables and their values; hopefully finding the correct data structure in the list. This was a complete failure. The indexed values are not listed under an object.\r\n\r\nThen I've tried all sort of black magic tricks I've found all around the web, without success. I've noticed that my object had several properties, including \"Container\". So I've tried to access that container, to list all of its elements, and so on. Again, that was a complete failure. I'm not really used to the .NET framework, but it seems to make very little sense to search for properties in components.\r\n\r\nAnd then I have found the syntax for [foreach](http://msdn.microsoft.com/en-us/library/ttw7t8t6%28v=vs.90%29.aspx) (good old [foreach](http://us1.php.net/manual/en/control-structures.foreach.php) you also use in PHP to access arrays). I've tried to access my \"indexed\" object via foreach, but again, this was a failure. Though, this time, I had a bit more information: `Error: foreach statement cannot operate on variables of type '<object>' because '<object>' does not contain a public definition for 'GetEnumerator'`. NOW I had some information about what to search. An object that has a `GetEnumerator` method.\r\n\r\nGiven that new information, I have searched all the main object properties for one that had a `GetEnumerator` method. I've found it to be called \"Properties\". Meh. Obvious name should have been obvious.\r\n\r\nSo the key to this problem was to understand the implicit link between the [Properties](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx) property and the [Indexer](http://msdn.microsoft.com/en-us/library/6x16t2tx.aspx) access in that case.\r\n\r\nI guess it should have been really straightforward for an experienced .NET programmer. Still, for me, that's the kind of things that would require a more extensive documentation, or even better, a corresponding data visualization in the IDE.\r\n\r\nAnd for those who wonder, here is a comparison between the [properties and the indexers](http://msdn.microsoft.com/en-us/library/4bsztef7.aspx).\r\n\r\n----\r\n\r\nMicrosoft won't ever change\r\n===========================\r\n*2013/11/09 - 0300 GMT+1*\r\n\r\nRecently, I've witnessed the (pathetic?) efforts that Microsoft does to [improve their image](http://blogs.msdn.com/b/interoperability/archive/2013/05/28/discussing-microsoft-s-openness-at-linux-tag.aspx), to [innovate](http://gizmodo.com/5953866/microsoft-surface-rt-review-this-is-technological-heartbreak), and so on. I've more or less always been forced to use Microsoft's products, would it even only be for their dominance over the PC gaming market. As a result, when I want to quickly prototype application idea, I sometimes use C#.\r\n\r\nAnd today, I just had the worst experience I ever had with an IDE for my entire life. With Microsoft Visual C# 2010 Express, to be precise. What happened is that I created a new project, coded a bit, and when I was satisfied with my work, after one hour or so; I did leave the IDE open in order to surf a bit, and quickly got back at it. Needless to say, I'm used to save my work, and I pressed [Ctrl] + [s] every five minute or so; while I was coding.\r\n\r\nWhen I got back at the IDE, it had a modal dialog in front of it, asking me for a registration key. As I'm not a big fan of the compulsory identification practices that spread like the pest, I clicked on cancel, **exactly the same way I did when I opened the IDE**, hoping to return to my work. But, unlike when the IDE opened, this time, it did close without a warning, without giving me a chance to save the project (which I thought was saved, as I had used [CTRL] + [s] extensively).\r\n\r\nBottom line: Now I have got a key for the IDE, I don't risk anymore (afaik) to lose some data because of some very bad design choice, dictated by an overly stupid marketing decision, very probably made by an even more stupid employee of a greedy monopolistic company that accumulates law infringements faster than Google gathers people's data. This is just to say: Microsoft, take a good look at us, while you still can. Take a good look at what people think of you when you treat them like retards. When you don't give a f*ck about interoperability and consider yourself the only important thing on Earth. And watch us switch to other systems and software. You won't ever change. We know that. It's only a matter of time before your name won't be anywhere but on Wikipedia. So, enjoy your wealth while you still can. And then, please, die silently.\r\n\r\n----\r\n\r\nFirst post\r\n==========\r\n*2013/11/09 - 0200 GMT+1*\r\n\r\nAs it is really simple to generate a website with github, I'm starting a log here. More to come, probably.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}